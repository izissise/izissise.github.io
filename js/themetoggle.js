document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("theme"),n=window.matchMedia("(prefers-color-scheme: dark)");function o(e){!document.startViewTransition||document.visibilityState!=="visible"?e():document.startViewTransition(e)}function s(){const e=localStorage.getItem("color-scheme")||null,t=n.matches?"dark":"light";return{effective:e||t,user:e,system:t}}function i(e){[...document.styleSheets].flatMap(e=>{try{return[...e.cssRules]}catch{return[]}}).filter(e=>e.media?.mediaText.match(/prefers-color-scheme/)).forEach(t=>t.media.mediaText=t.media.mediaText.replace(/light|dark/,e.effective))}function a(e){e.user?e.effective==="dark"?t.textContent="â˜€ï¸":t.textContent="ðŸŒ™":t.textContent="ðŸŒ“"}function e(e){e?(e==="system"?localStorage.removeItem("color-scheme"):localStorage.setItem("color-scheme",e),e=s()):e=s();const t=()=>{console.log(e),i(e),a(e)};o(t)}t.addEventListener("click",function(){const t=localStorage.getItem("color-scheme");t?e(t==="light"?"dark":"system"):e("light")}),n.addEventListener("change",function(){localStorage.getItem("color-scheme")||e()}),e()})